<!DOCTYPE html>
<html>
<head>
    <title>Debug Badges</title>
</head>
<body>
    <h1>Badge Debug Test</h1>
    <div id="debug-output"></div>
    
    <script>
        // Simulate the unreadDrawers and drawerThemes from main.js
        const unreadDrawers = new Set([
          'drawer1', 'drawer2', 'drawer3', 'drawer4', 
          'steering', 'forge', 'mail-box', 'trashTruck', 'convoyeur', 'sensorSensei',
          // Individual skillFlowers for CV theme badges
          'skillFlower1', 'skillFlower2', 'skillFlower3', 'skillFlower4', 'skillFlower5',
          'skillFlower6', 'skillFlower7', 'skillFlower8', 'skillFlower9'
        ]);
        
        const drawerThemes = {
          'drawer1': 'home',
          'drawer2': 'home',
          'drawer3': 'home', 
          'drawer4': 'home',
          'steering': 'home',
          'pc': 'home',
          'forge': 'forge',
          'mail-box': 'contact',
          'trashTruck': 'home',
          'convoyeur': 'home',
          'sensorSensei': 'projects',
          'skillFlower': 'cv' // All skillFlowers belong to CV theme
        };
        
        function getUnreadCountForTheme(themeId) {
          let count = 0;
          let items = [];
          unreadDrawers.forEach(drawer => {
            let drawerTheme = drawerThemes[drawer];
            
            // Handle skillFlowers - they all belong to CV theme
            if (drawer.startsWith('skillFlower')) {
              drawerTheme = 'cv';
            }
            
            if (drawerTheme === themeId) {
              count++;
              items.push(drawer);
            }
          });
          
          return { count, items };
        }
        
        const debugOutput = document.getElementById('debug-output');
        let output = '<h2>Badge Counting Debug</h2>';
        
        output += '<h3>All Unread Drawers:</h3>';
        output += '<ul>';
        unreadDrawers.forEach(drawer => {
            output += `<li>${drawer}</li>`;
        });
        output += '</ul>';
        
        output += '<h3>Theme Counts:</h3>';
        const themes = ['home', 'forge', 'contact', 'projects', 'cv'];
        themes.forEach(themeId => {
            const result = getUnreadCountForTheme(themeId);
            output += `<div><strong>${themeId}</strong>: ${result.count} items</div>`;
            output += '<ul>';
            result.items.forEach(item => {
                output += `<li>${item} (${drawerThemes[item] || 'skillFlower->cv'})</li>`;
            });
            output += '</ul><br>';
        });
        
        debugOutput.innerHTML = output;
    </script>
</body>
</html>
