<!DOCTYPE html>
<html>
<head>
    <title>Debug Garage Hover Issue</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a2e;
            color: #fff;
            padding: 20px;
        }
        .debug-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .test-button {
            background: #1a82f7;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .log {
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>🔧 Garage Navigation Hover Debug Tool</h1>
    
    <div class="debug-section">
        <h3>Issue Description:</h3>
        <p>When hovering over the "Garage" navigation item, other 3D objects disappear due to incorrect emissive intensity values.</p>
        
        <h3>Fixed Issues:</h3>
        <ul>
            <li>✅ Fixed emissiveIntensity reset from 1 to 0 in mouseleave handler</li>
            <li>✅ Added proper handling for material arrays in hex highlighting</li>
            <li>✅ Added emissive property checks to prevent errors</li>
        </ul>
    </div>
    
    <div class="debug-section">
        <h3>Test Instructions:</h3>
        <ol>
            <li>Open the portfolio in another tab</li>
            <li>Wait for all assets to load completely</li>
            <li>Navigate to the garage area or hover over "Garage" in the sidebar</li>
            <li>Check if objects disappear when hovering/leaving the garage navigation</li>
            <li>Use the buttons below to inspect the scene if needed</li>
        </ol>
        
        <button class="test-button" onclick="openPortfolio()">🚀 Open Portfolio</button>
        <button class="test-button" onclick="logCurrentState()">📊 Log Debug Info</button>
        <button class="test-button" onclick="clearLog()">🗑️ Clear Log</button>
    </div>
    
    <div class="debug-section">
        <h3>Debug Console:</h3>
        <div id="debugLog" class="log">Ready for testing...\n</div>
    </div>
    
    <script>
        function log(message) {
            const logElement = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        function openPortfolio() {
            log('Opening portfolio.html in new tab...');
            window.open('portfolio.html', '_blank');
        }
        
        function logCurrentState() {
            log('=== DEBUG STATE CHECK ===');
            log('Window location: ' + window.location.href);
            log('User agent: ' + navigator.userAgent);
            log('Screen resolution: ' + screen.width + 'x' + screen.height);
            log('Viewport: ' + window.innerWidth + 'x' + window.innerHeight);
            
            // Check if running from file:// protocol
            if (window.location.protocol === 'file:') {
                log('✅ Running from file:// protocol - OK for local testing');
            } else {
                log('ℹ️ Running from ' + window.location.protocol + ' - check CORS if needed');
            }
            
            log('=== EXPECTED FIXES ===');
            log('1. Garage navigation hover should not make objects disappear');
            log('2. EmissiveIntensity should reset to 0, not 1');
            log('3. Material arrays should be handled properly');
            log('========================');
        }
        
        function clearLog() {
            document.getElementById('debugLog').textContent = 'Log cleared.\n';
        }
        
        // Auto-log initial state
        setTimeout(() => {
            logCurrentState();
        }, 1000);
    </script>
</body>
</html>
